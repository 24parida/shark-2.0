  build-win:
    name: Build on Windows (MSYS2/MinGW)
    runs-on: windows-latest
    steps:
      # … checkout, msys2/setup-msys2@v2 with mingw-w64-x86_64-tbb, etc. …

      - name: Configure & build
        shell: msys2 {0}
        run: |
          mkdir -p build
          cd build
          cmake -G "MinGW Makefiles" .. \
            -DCMAKE_BUILD_TYPE=Release \
            -DCMAKE_CXX_STANDARD=20 \
            -DCMAKE_CXX_EXTENSIONS=OFF \
            -DCMAKE_CXX_FLAGS="-O3 -ffast-math"
          mingw32-make -j

          # bundle FLTK + TBB DLLs next to shark.exe
          cp /mingw64/bin/libfltk-1.4.dll        .
          cp /mingw64/bin/libfltk_images-1.4.dll .
          cp /mingw64/bin/libfltk_forms-1.4.dll .
          cp /mingw64/bin/libfltk_gl-1.4.dll    .
          cp /mingw64/bin/libtbb.dll            .

      - name: Upload Windows bundle
        uses: actions/upload-artifact@v4
        with:
          name: shark-windows
          path: |
            build/shark.exe
            build/libfltk-*.dll
            build/libtbb.dll
